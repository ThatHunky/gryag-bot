# üîß –ó–≤—ñ—Ç –ø—Ä–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—à—É–∫–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç —à—É–∫–∞–≤ –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤ –¥–ª—è –ø–æ—à—É–∫—É.

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ–±–ª–µ–º–∏:**

- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–≥—Ä—è–≥ –∑–Ω–∞–π–¥–∏ —ñ–Ω—Ñ—É –ø—Ä–æ –∂–∏—Ç–æ–º–∏—Ä"
- –ë–æ—Ç —à—É–∫–∞–≤: "–≥—Ä—è–≥ –∑–Ω–∞–π–¥–∏ —ñ–Ω—Ñ—É –ø—Ä–æ –∂–∏—Ç–æ–º–∏—Ä" (–≤–µ—Å—å —Ç–µ–∫—Å—Ç)
- –ü–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ: "–∂–∏—Ç–æ–º–∏—Ä" (—Ç—ñ–ª—å–∫–∏ –ø—Ä–µ–¥–º–µ—Ç –ø–æ—à—É–∫—É)

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### 1. –ù–æ–≤–∏–π –º–µ—Ç–æ–¥ `extractSearchQuery()` –≤ `search.js`

- –í–∏–¥–∞–ª—è—î "–≥—Ä—è–≥" –∑ –ø–æ—á–∞—Ç–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î regex –ø–∞—Ç–µ—Ä–Ω–∏ –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
- –ü—ñ–¥—Ç—Ä–∏–º—É—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—É —Ç–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É –º–æ–≤–∏
- –û–±—Ä–æ–±–ª—è—î —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤

### 2. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ `messages.js`

- –û–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥—ñ–∫—É –¥–ª—è –≥—Ä—É–ø–æ–≤–∏—Ö —á–∞—Ç—ñ–≤
- –û–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥—ñ–∫—É –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —á–∞—Ç—ñ–≤
- –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏—Ç—è–≥–Ω—É—Ç–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–ª—è –¥–µ–±–∞–≥—É

### 3. –ü–æ–∫—Ä–∞—â–µ–Ω—ñ —Ç—Ä–∏–≥–µ—Ä–∏ –ø–æ—à—É–∫—É

- –î–æ–¥–∞–Ω–æ "—â–æ –≤—ñ–¥–æ–º–æ" –¥–æ —Å–ø–∏—Å–∫—É —Ç—Ä–∏–≥–µ—Ä—ñ–≤
- –†–æ–∑—à–∏—Ä–µ–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ä—ñ–∑–Ω–∏—Ö —Ñ—Ä–∞–∑

## üß™ –¢–µ—Å—Ç–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤

```text
"–≥—Ä—è–≥ –∑–Ω–∞–π–¥–∏ —ñ–Ω—Ñ—É –ø—Ä–æ –∂–∏—Ç–æ–º–∏—Ä" ‚Üí "–∂–∏—Ç–æ–º–∏—Ä" ‚úÖ
"–≥—Ä—è–≥, –ø–æ—à—É–∫–∞–π —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–∏—ó–≤" ‚Üí "–∫–∏—ó–≤" ‚úÖ
"—â–æ –≤—ñ–¥–æ–º–æ –ø—Ä–æ —Ö–∞—Ä–∫—ñ–≤" ‚Üí "—Ö–∞—Ä–∫—ñ–≤" ‚úÖ
"—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ –ª—å–≤—ñ–≤" ‚Üí "–ª—å–≤—ñ–≤" ‚úÖ
"—â–æ —Ç–∞–º –∑ –ø–æ–≥–æ–¥–æ—é –≤ –∫–∏—î–≤—ñ?" ‚Üí "–ø–æ–≥–æ–¥–æ—é –≤ –∫–∏—î–≤—ñ" ‚úÖ
```

### –¢—Ä–∏–≥–µ—Ä–∏ –ø–æ—à—É–∫—É

```text
"—â–æ –≤—ñ–¥–æ–º–æ –ø—Ä–æ –∫–∏—ó–≤" ‚Üí ‚úÖ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
"—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —Ö–∞—Ä–∫—ñ–≤" ‚Üí ‚úÖ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
"–ø–æ—à—É–∫–∞–π —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –æ–¥–µ—Å—É" ‚Üí ‚úÖ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
```

## üìù –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

1. **`src/bot/services/search.js`**
   - –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ `extractSearchQuery()`
   - –û–Ω–æ–≤–ª–µ–Ω–æ `shouldTriggerSearch()` –∑ –Ω–æ–≤–∏–º–∏ —Ç—Ä–∏–≥–µ—Ä–∞–º–∏

2. **`src/bot/handlers/messages.js`**
   - –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ —É –≥—Ä—É–ø–æ–≤–∏—Ö —á–∞—Ç–∞—Ö
   - –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ —É –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —á–∞—Ç–∞—Ö
   - –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–µ–±–∞–≥—É

3. **–¢–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏**
   - `test-query-extraction.js` - —Ç–µ—Å—Ç –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
   - `test-search-full.js` - –ø–æ–≤–Ω–∏–π —Ç–µ—Å—Ç –ø–æ—à—É–∫–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
   - `test-triggers.js` - —Ç–µ—Å—Ç —Ç—Ä–∏–≥–µ—Ä—ñ–≤

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ü—Ä–æ–±–ª–µ–º—É –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ!**

–¢–µ–ø–µ—Ä –±–æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—Ç—è–≥—É—î –ø–æ—à—É–∫–æ–≤—ñ –∑–∞–ø–∏—Ç–∏:

- "–≥—Ä—è–≥ –∑–Ω–∞–π–¥–∏ —ñ–Ω—Ñ—É –ø—Ä–æ –∂–∏—Ç–æ–º–∏—Ä" ‚Üí —à—É–∫–∞—î "–∂–∏—Ç–æ–º–∏—Ä"
- "—â–æ –≤—ñ–¥–æ–º–æ –ø—Ä–æ —Ö–∞—Ä–∫—ñ–≤" ‚Üí —à—É–∫–∞—î "—Ö–∞—Ä–∫—ñ–≤"
- "—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ –Ω–æ–≤–∏–Ω–∏ —É–∫—Ä–∞—ó–Ω–∏" ‚Üí —à—É–∫–∞—î "–Ω–æ–≤–∏–Ω–∏ —É–∫—Ä–∞—ó–Ω–∏"

–ü–æ—à—É–∫–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑ —á–∏—Å—Ç–∏–º–∏ –∑–∞–ø–∏—Ç–∞–º–∏ –∑–∞–º—ñ—Å—Ç—å –ø–æ–≤–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.
