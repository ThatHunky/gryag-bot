# üîç –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ —É Gryag Bot

## –©–æ —Ü–µ —Ç–∞–∫–µ?

Gryag Bot —Ç–µ–ø–µ—Ä –æ—Å–Ω–∞—â–µ–Ω–∏–π –ø–æ—Ç—É–∂–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É, —è–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- üìù –ó–±–µ—Ä—ñ–≥–∞—î –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö SQLite
- üß† –°—Ç–≤–æ—Ä—é—î embeddings –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Google Gemini API
- üîç –®—É–∫–∞—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ —ñ—Å—Ç–æ—Ä—ñ—ó –ø—ñ–¥ —á–∞—Å –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- üí¨ –ü–æ–∫—Ä–∞—â—É—î —è–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –®–Ü –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    ‚Üì
–ë–æ—Ç –∑–±–µ—Ä—ñ–≥–∞—î —É –±–∞–∑—É –¥–∞–Ω–∏—Ö
    ‚Üì
–°—Ç–≤–æ—Ä—é—î embedding —á–µ—Ä–µ–∑ Gemini API
    ‚Üì
–ó–±–µ—Ä—ñ–≥–∞—î embedding –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
```

### –†–æ–∑—É–º–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
```
–ù–æ–≤–∏–π –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    ‚Üì
–°—Ç–≤–æ—Ä–∏—Ç–∏ embedding –∑–∞–ø–∏—Ç—É
    ‚Üì
–ó–Ω–∞–π—Ç–∏ —Å—Ö–æ–∂—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ—Å—Ç–æ—Ä—ñ—ó (—Ç–æ–ø-3)
    ‚Üì
–î–æ–¥–∞—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ –ø—Ä–æ–º–ø—Ç—É
    ‚Üì
–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —ñ—Å—Ç–æ—Ä—ñ—ó
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É
```bash
# –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
GEMINI_API_KEY=your_gemini_api_key_here

# –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
MAX_CONTEXT_MESSAGES=100           # –ú–∞–∫—Å–∏–º—É–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É –ø–∞–º'—è—Ç—ñ
CONTEXT_MESSAGES_FOR_AI=20         # –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –®–Ü –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
DB_PATH=./data/bot.db              # –®–ª—è—Ö –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
```bash
node test-semantic-search.js
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
npm start
```

## –ö–æ–º–∞–Ω–¥–∏

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `/stats` - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
- `/help` - –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π

### –î–ª—è –∞–¥–º—ñ–Ω—ñ–≤
- `/admin` - –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ú–æ–¥–µ–ª—å Embeddings
- **–ú–æ–¥–µ–ª—å**: `text-embedding-004` (Google Gemini)
- **–†–æ–∑–º—ñ—Ä –≤–µ–∫—Ç–æ—Ä—ñ–≤**: 768 –≤–∏–º—ñ—Ä—ñ–≤
- **–ú–æ–≤–∞**: –ü—ñ–¥—Ç—Ä–∏–º—É—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—É —Ç–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **–¢–∏–ø**: SQLite3
- **–¢–∞–±–ª–∏—Ü—ñ**:
  - `chat_messages` - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ embeddings
  - `user_preferences` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### –ö–µ—à—É–≤–∞–Ω–Ω—è
- **–ö–µ—à embeddings**: –î–æ 1000 –∑–∞–ø–∏—Å—ñ–≤ —É –ø–∞–º'—è—Ç—ñ
- **–ê–≤—Ç–æ–æ—á–∏—â–µ–Ω–Ω—è**: –°—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É

### üéØ –¢–æ—á–Ω—ñ—Å—Ç—å
- –ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Å—Ö–æ–∂—ñ –∑–∞ –∑–º—ñ—Å—Ç–æ–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Å–ª–æ–≤–∞ —Ä—ñ–∑–Ω—ñ
- –†–æ–∑—É–º—ñ—î –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞ –Ω–∞–º—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### ‚ö° –®–≤–∏–¥–∫—ñ—Å—Ç—å
- –ö–µ—à—É–≤–∞–Ω–Ω—è embeddings –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è

### üß† –†–æ–∑—É–º–Ω—ñ—Å—Ç—å
- –ë–æ—Ç "–ø–∞–º'—è—Ç–∞—î" –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ä–æ–∑–º–æ–≤–∏
- –í—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å—Ç–∞—é—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ —Ç–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏–º–∏

### üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `/stats`
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø–æ—à—É–∫—É

## –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏

```
üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (–≤—á–æ—Ä–∞): "–Ø –ª—é–±–ª—é –ø—ñ—Ü—É –∑ –≥—Ä–∏–±–∞–º–∏"
ü§ñ –ë–æ—Ç: "–ß—É–¥–æ–≤–∏–π –≤–∏–±—ñ—Ä! –ì—Ä–∏–±–∏ –¥–æ–¥–∞—é—Ç—å –ø—ñ—Ü—ñ –æ—Å–æ–±–ª–∏–≤–æ–≥–æ —Å–º–∞–∫—É."

üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (—Å—å–æ–≥–æ–¥–Ω—ñ): "–©–æ –∑–∞–º–æ–≤–∏—Ç–∏ –Ω–∞ –≤–µ—á–µ—Ä—é?"
ü§ñ –ë–æ—Ç: "–ü–∞–º'—è—Ç–∞—é, —Ç–∏ –ª—é–±–∏—à –ø—ñ—Ü—É –∑ –≥—Ä–∏–±–∞–º–∏! –ú–æ–∂–µ, –∑–∞–º–æ–≤–∏—Ç–∏ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ?"
```

## –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ–º–∏–ª–∫–∏ embeddings
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Gemini API
node test-semantic-search.js
```

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏ data/
mkdir -p data

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la data/
```

### –ü–æ–≤—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞
```bash
# –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à embeddings
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É /admin –≤ –±–æ—Ç—ñ
```

## –†–æ–∑—Ä–æ–±–∫–∞

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
1. –ú–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ `embedding.js` –¥–ª—è –Ω–æ–≤–æ—ó –ª–æ–≥—ñ–∫–∏ –ø–æ—à—É–∫—É
2. –û–Ω–æ–≤–∏—Ç–∏ `gemini.js` –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –®–Ü
3. –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ `commands.js`

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
npm test

# –¢–µ—Å—Ç —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
node test-semantic-search.js

# –¢–µ—Å—Ç —Ç—Ä–æ—Ç–ª—ñ–Ω–≥—É
node throttle-test.js
```

---

**üéâ –¢–µ–ø–µ—Ä –≤–∞—à –±–æ—Ç –º–∞—î –¥–æ–≤–≥–æ—Ç—Ä–∏–≤–∞–ª—É –ø–∞–º'—è—Ç—å —Ç–∞ —Ä–æ–∑—É–º–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!**
